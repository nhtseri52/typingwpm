<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>HỆ THỐNG GÕ PHÍM VIỆT NAM - QUẢN TRỊ TỐI CAO</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        /* --- CSS RESET & VARIABLES --- */
        :root {
            --primary: #2c3e50;
            --accent: #3498db;
            --success: #2ecc71;
            --danger: #e74c3c;
            --warning: #f1c40f;
            --bg: #f0f2f5;
            --card: #ffffff;
            --sidebar-w: 280px;
            --shadow: 0 10px 30px rgba(0,0,0,0.08);
            --transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }

        * { box-sizing: border-box; margin: 0; padding: 0; font-family: 'Inter', 'Segoe UI', sans-serif; }

        body { background: var(--bg); color: var(--primary); height: 100vh; display: flex; overflow: hidden; }

        /* --- AUTH SYSTEM (LOGIN/REGISTER) --- */
        .auth-overlay {
            position: fixed; inset: 0; background: linear-gradient(135deg, #1e3c72, #2a5298);
            z-index: 9999; display: flex; align-items: center; justify-content: center;
        }

        .auth-card {
            background: var(--card); padding: 40px; border-radius: 20px; width: 420px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.4); text-align: center;
            position: relative; overflow: hidden;
        }

        .auth-tabs { display: flex; margin-bottom: 30px; border-bottom: 2px solid #eee; }
        .auth-tab {
            flex: 1; padding: 12px; cursor: pointer; font-weight: 700; color: #999;
            transition: var(--transition);
        }
        .auth-tab.active { color: var(--accent); border-bottom: 3px solid var(--accent); }

        .auth-form { display: none; flex-direction: column; animation: slideIn 0.3s ease; }
        .auth-form.active { display: flex; }

        @keyframes slideIn { from { transform: translateX(20px); opacity: 0; } to { transform: translateX(0); opacity: 1; } }

        .auth-input-group { text-align: left; margin-bottom: 15px; }
        .auth-input-group label { display: block; font-size: 13px; font-weight: 600; margin-bottom: 5px; color: #666; }
        .auth-input {
            width: 100%; padding: 12px 15px; border: 2px solid #eee; border-radius: 10px;
            font-size: 15px; transition: var(--transition); outline: none;
        }
        .auth-input:focus { border-color: var(--accent); }

        .btn-auth {
            background: var(--accent); color: white; padding: 14px; border: none;
            border-radius: 10px; font-weight: 800; cursor: pointer; margin-top: 10px;
            box-shadow: 0 4px 15px rgba(52, 152, 219, 0.3);
        }

        /* --- SIDEBAR --- */
        .sidebar {
            width: var(--sidebar-w); background: var(--card); height: 100%;
            display: flex; flex-direction: column; border-right: 1px solid #ddd; flex-shrink: 0;
        }

        .sidebar-header {
            padding: 30px 20px; border-bottom: 1px solid #f0f0f0; text-align: center;
        }

        .sidebar-title {
            font-size: 18px; font-weight: 900; color: var(--accent);
            text-transform: uppercase; letter-spacing: 1px;
        }

        .nav-group { flex: 1; padding: 20px 15px; overflow-y: auto; }
        .nav-item {
            display: flex; align-items: center; gap: 15px; padding: 12px 20px;
            border-radius: 12px; cursor: pointer; color: var(--primary);
            font-weight: 600; margin-bottom: 8px; transition: var(--transition);
        }
        .nav-item:hover { background: #f0f4f8; transform: translateX(5px); }
        .nav-item.active { background: var(--accent); color: white; box-shadow: 0 4px 12px rgba(52,152,219,0.3); }
        .nav-item.admin-link { color: var(--danger); }
        .nav-item.admin-link.active { background: var(--danger); color: white; }

        .user-info { padding: 20px; background: #f8f9fa; border-top: 1px solid #eee; }

        /* --- MAIN VIEW --- */
        .main-view { flex: 1; padding: 40px; overflow-y: auto; position: relative; }
        .page { display: none; animation: fadeIn 0.4s ease; max-width: 1100px; margin: 0 auto; width: 100%; }
        .page.active { display: block; }

        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }

        /* --- TYPING ENGINE UI --- */
        .typing-container {
            background: white; padding: 40px; border-radius: 20px; box-shadow: var(--shadow);
            position: relative; overflow: hidden;
        }

        .word-box {
            background: #fdfdfd; border: 1px solid #eee; border-radius: 15px;
            padding: 25px; height: 130px; overflow: hidden; position: relative;
            font-size: 32px; line-height: 60px; margin-bottom: 30px;
        }

        .word-scroll { position: absolute; top: 25px; left: 25px; right: 25px; transition: top 0.2s; }
        .word-scroll span { margin-right: 20px; border-radius: 6px; padding: 0 8px; color: #777; }
        .word-scroll .current { background: #e9ecef; color: #000; font-weight: 700; }
        .word-scroll .correct { color: var(--success); }
        .word-scroll .wrong { color: var(--danger); background: #ffebeb; }

        .input-row { display: flex; gap: 20px; }
        .typing-input {
            flex: 1; height: 70px; border: 2px solid #e0e0e0; border-radius: 15px;
            padding: 0 25px; font-size: 28px; outline: none; transition: 0.2s;
        }
        .typing-input:focus { border-color: var(--accent); box-shadow: 0 0 15px rgba(52,152,219,0.1); }

        .clock-box {
            width: 120px; background: var(--primary); color: white;
            border-radius: 15px; display: flex; align-items: center; justify-content: center;
            font-size: 32px; font-weight: 900;
        }

        /* --- RESULT OVERLAY --- */
        .result-panel {
            position: absolute; inset: 0; background: rgba(255,255,255,0.98);
            display: none; flex-direction: column; align-items: center; justify-content: center; z-index: 100;
        }
        .res-row { display: grid; grid-template-columns: repeat(3, 1fr); gap: 30px; margin: 40px 0; width: 80%; }
        .res-item { background: var(--bg); padding: 25px; border-radius: 20px; text-align: center; }
        .res-val { font-size: 50px; font-weight: 900; color: var(--accent); }

        /* --- ADMIN DASHBOARD --- */
        .admin-stats { display: grid; grid-template-columns: repeat(4, 1fr); gap: 20px; margin-bottom: 30px; }
        .stat-card { background: white; padding: 20px; border-radius: 15px; box-shadow: var(--shadow); border-bottom: 5px solid var(--accent); }
        
        .user-table {
            width: 100%; border-collapse: collapse; background: white; border-radius: 15px;
            overflow: hidden; box-shadow: var(--shadow);
        }
        .user-table th { background: #f8f9fa; padding: 15px 20px; text-align: left; font-size: 14px; }
        .user-table td { padding: 15px 20px; border-top: 1px solid #eee; }
        
        .btn-action { padding: 8px 15px; border-radius: 8px; border: none; cursor: pointer; font-weight: bold; font-size: 12px; margin-right: 5px; }
        .btn-delete { background: var(--danger); color: white; }
        .btn-reset-pw { background: var(--warning); color: #000; }

        /* --- UTILS --- */
        .badge { padding: 4px 10px; border-radius: 20px; font-size: 11px; font-weight: bold; }
        .badge-admin { background: #ffeaa7; color: #d35400; }
        .badge-user { background: #dff9fb; color: #130f40; }
    </style>
</head>
<body>

    <div id="auth-screen" class="auth-overlay">
        <div class="auth-card">
            <div class="auth-tabs">
                <div class="auth-tab active" id="tab-login" onclick="App.switchAuth('login')">ĐĂNG NHẬP</div>
                <div class="auth-tab" id="tab-reg" onclick="App.switchAuth('reg')">ĐĂNG KÝ</div>
            </div>

            <div id="form-login" class="auth-form active">
                <div class="auth-input-group">
                    <label>Tên tài khoản</label>
                    <input type="text" id="login-u" class="auth-input" placeholder="Nhập username...">
                </div>
                <div class="auth-input-group">
                    <label>Mật khẩu</label>
                    <input type="password" id="login-p" class="auth-input" placeholder="Nhập password...">
                </div>
                <button class="btn-auth" onclick="App.doLogin()">VÀO HỆ THỐNG</button>
            </div>

            <div id="form-reg" class="auth-form">
                <div class="auth-input-group">
                    <label>Chọn tên tài khoản</label>
                    <input type="text" id="reg-u" class="auth-input" placeholder="Ví dụ: pro_typer_99">
                </div>
                <div class="auth-input-group">
                    <label>Thiết lập mật khẩu</label>
                    <input type="password" id="reg-p" class="auth-input" placeholder="Tối thiểu 6 ký tự">
                </div>
                <div class="auth-input-group">
                    <label>Xác nhận mật khẩu</label>
                    <input type="password" id="reg-p2" class="auth-input" placeholder="Nhập lại mật khẩu">
                </div>
                <button class="btn-auth" style="background: var(--success);" onclick="App.doRegister()">TẠO TÀI KHOẢN MỚI</button>
            </div>
        </div>
    </div>

    <div class="sidebar">
        <div class="sidebar-header">
            <div class="sidebar-title" id="sidebar-name">GÕ PHÍM VIỆT NAM</div>
        </div>
        <div class="nav-group">
            <div class="nav-item active" id="nav-home" onclick="App.go('home')">
                <i class="fa-solid fa-keyboard"></i> Luyện tập gõ
            </div>
            <div class="nav-item" id="nav-rank" onclick="App.go('rank')">
                <i class="fa-solid fa-trophy"></i> Bảng vàng
            </div>
            <div class="nav-item" id="nav-comm" onclick="App.go('comm')">
                <i class="fa-solid fa-users"></i> Cộng đồng
            </div>
            <div class="nav-item" id="nav-pro" onclick="App.go('pro')">
                <i class="fa-solid fa-user-gear"></i> Hồ sơ của tôi
            </div>
            <div id="admin-menu-root"></div> </div>
        <div class="user-info">
            <p style="font-size: 12px; color: #888;">Đang đăng nhập:</p>
            <p style="font-weight: 800; color: var(--accent);" id="display-u">User Name</p>
            <button onclick="App.logout()" style="border:none; background:none; color:var(--danger); font-size:12px; cursor:pointer; font-weight:700; margin-top:5px;">[ Đăng xuất ]</button>
        </div>
    </div>

    <div class="main-view">
        
        <div id="page-home" class="page active">
            <div class="typing-container">
                <div id="res-panel" class="result-panel">
                    <h1 style="font-size: 35px;">HOÀN THÀNH!</h1>
                    <div class="res-row">
                        <div class="res-item"><p>Tốc độ</p><div class="res-val" id="res-wpm">0</div><p>WPM</p></div>
                        <div class="res-item"><p>Chính xác</p><div class="res-val" id="res-acc">0%</div></div>
                        <div class="res-item"><p>Từ đúng</p><div class="res-val" id="res-ok" style="color:var(--success)">0</div></div>
                    </div>
                    <button class="btn-auth" style="width: 200px;" onclick="App.resetTyping()">GÕ LẠI BÀI MỚI</button>
                </div>

                <div class="word-box"><div id="word-scroll" class="word-scroll"></div></div>
                <div class="input-row">
                    <input type="text" id="t-input" class="typing-input" placeholder="Gõ từ tại đây để bắt đầu tính giờ..." autocomplete="off">
                    <div id="clock" class="clock-box">1:00</div>
                    <button class="btn-auth" style="margin:0; width:70px" onclick="App.resetTyping()"><i class="fa-solid fa-rotate"></i></button>
                </div>
            </div>
            <div style="margin-top: 30px; display: flex; gap: 50px;">
                <div class="stat-mini">
                    <p style="color: #999; font-size: 13px; font-weight: 700;">KỶ LỤC CỦA BẠN</p>
                    <h2 style="font-size: 30px;" id="stat-best">0 WPM</h2>
                </div>
                <div class="stat-mini">
                    <p style="color: #999; font-size: 13px; font-weight: 700;">TỔNG TỪ ĐÃ GÕ</p>
                    <h2 style="font-size: 30px;" id="stat-total">0</h2>
                </div>
            </div>
        </div>

        <div id="page-admin" class="page">
            <h1 style="margin-bottom: 30px;"><i class="fa-solid fa-shield-halved"></i> QUẢN TRỊ VIÊN</h1>
            
            <div class="admin-stats">
                <div class="stat-card"><h3>Thành viên</h3><h2 id="adm-count">0</h2></div>
                <div class="stat-card"><h3>Bài đăng</h3><h2 id="adm-posts">0</h2></div>
                <div class="stat-card" style="border-color: var(--success);"><h3>Kỷ lục hệ thống</h3><h2 id="adm-record">0</h2></div>
                <div class="stat-card" style="border-color: var(--warning);"><h3>Online</h3><h2>1</h2></div>
            </div>

            <div class="card" style="background:white; padding:25px; border-radius:15px; margin-bottom: 30px;">
                <h3>Cài đặt Sidebar</h3>
                <div style="display:flex; gap:10px; margin-top:10px;">
                    <input type="text" id="adm-sidebar-in" class="auth-input" placeholder="Đổi tên sidebar...">
                    <button class="btn-auth" style="margin:0" onclick="App.updateSidebarName()">LƯU TÊN MỚI</button>
                </div>
            </div>

            <h3>Danh sách người dùng</h3>
            <table class="user-table" style="margin-top: 15px;">
                <thead>
                    <tr>
                        <th>Username</th>
                        <th>Quyền</th>
                        <th>Kỷ lục</th>
                        <th>Thao tác</th>
                    </tr>
                </thead>
                <tbody id="adm-user-list"></tbody>
            </table>
        </div>

        <div id="page-rank" class="page"><h1>BẢNG XẾP HẠNG CAO THỦ</h1><table class="user-table" id="rank-table" style="margin-top:20px;"></table></div>
        <div id="page-comm" class="page"><h1>CỘNG ĐỒNG VĂN BẢN</h1><div id="comm-list" style="margin-top:20px;"></div></div>
        <div id="page-pro" class="page"><h1>HỒ SƠ CỦA TÔI</h1><div id="pro-data" class="card" style="background:white; padding:30px; border-radius:15px; margin-top:20px;"></div></div>

    </div>

    <script>
        const DICT = "anh em gia đình trường học máy tính điện thoại bàn phím chuột màn hình lập trình thông minh chiến thắng nỗ lực kiên trì thành công hạnh phúc việt nam hà nội sài gòn du lịch biển nước ăn ngon vui vẻ tự tin sáng tạo lịch sử toán vật lý hóa học tiếng anh độc lập tự do tổ quốc bạn bè sinh nhật lễ hội xuân hạ thu đông vở viết kiến thức kỹ năng văn phòng chất lượng tài chính sức khỏe thể thao bóng đá gym phim ảnh mạng xã hội chụp hình nhà khách sạn cà phê trà sữa phở bún cơm trái cây cam táo bia rượu mưa nắng gió mây trời đất sông núi rừng cây hoa lá vàng bạc đồng sắt thép nhôm kính nhựa giấy bút mực thước cặp sách bàn ghế giường tủ bếp nồi chảo chén đĩa muỗng đũa khăn áo quần giày dép mũ nón ví tiền đồng hồ kính mát nhẫn dây chuyền vòng tay tai nghe loa pin sạc cáp wifi web app code game phim nhạc họa ca múa hát nhảy đàn sáo trống kèn vẽ tô màu tranh ảnh tượng đá gạch cát vôi xi măng sơn gỗ tre nứa lá cọ dừa chuối xoài ổi mận đào lê nho dâu bơ mít dứa khế chanh ớt tỏi hành gừng sả tiêu muối đường mì chính dầu mỡ thịt cá tôm cua ốc ếch lươn gà vịt ngỗng heo bò trâu dê cừu ngựa voi hổ báo sư tử gấu khỉ vượn nai hoẵng thỏ chuột mèo chó chim cá sâu bướm ong kiến gián muỗi ruồi nhện rắn rùa thằn lằn".split(" ");

        const App = {
            user: null, words: [], curIdx: 0, timeLeft: 60, playing: false, timer: null, ok: 0, err: 0,

            init() {
                // Khởi tạo Admin mặc định nếu chưa có
                if(!localStorage.getItem('v32_u_nhtseri')) {
                    localStorage.setItem('v32_u_nhtseri', JSON.stringify({u:'nhtseri', p:'Locthinh1!', role:'admin', best:0, total:0}));
                }

                const ss = localStorage.getItem('v32_session');
                if(ss) {
                    this.user = JSON.parse(ss);
                    document.getElementById('auth-screen').style.display = 'none';
                    this.setupUI();
                }

                // Sidebar Name
                const sn = localStorage.getItem('v32_sidebar_name');
                if(sn) document.getElementById('sidebar-name').innerText = sn;
            },

            // --- AUTH LOGIC ---
            switchAuth(type) {
                document.querySelectorAll('.auth-tab').forEach(t => t.classList.remove('active'));
                document.querySelectorAll('.auth-form').forEach(f => f.classList.remove('active'));
                document.getElementById('tab-' + type).classList.add('active');
                document.getElementById('form-' + type).classList.add('active');
            },

            doLogin() {
                const u = document.getElementById('login-u').value.trim();
                const p = document.getElementById('login-p').value.trim();
                const data = localStorage.getItem('v32_u_' + u);
                
                if(!data) return alert("Tài khoản không tồn tại!");
                const user = JSON.parse(data);
                if(user.p !== p) return alert("Sai mật khẩu rồi bro!");

                this.user = user;
                localStorage.setItem('v32_session', JSON.stringify(this.user));
                location.reload();
            },

            doRegister() {
                const u = document.getElementById('reg-u').value.trim();
                const p = document.getElementById('reg-p').value.trim();
                const p2 = document.getElementById('reg-p2').value.trim();

                if(!u || p.length < 6) return alert("Username trống hoặc Pass quá ngắn!");
                if(p !== p2) return alert("Mật khẩu không khớp!");
                if(localStorage.getItem('v32_u_' + u)) return alert("Tên này có người lấy rồi!");

                const newUser = {u, p, role:'user', best:0, total:0};
                localStorage.setItem('v32_u_' + u, JSON.stringify(newUser));
                alert("Đăng ký thành công! Hãy đăng nhập nhé.");
                this.switchAuth('login');
            },

            logout() {
                localStorage.removeItem('v32_session');
                location.reload();
            },

            // --- UI SETUP ---
            setupUI() {
                document.getElementById('display-u').innerText = this.user.u;
                if(this.user.role === 'admin') {
                    document.getElementById('admin-menu-root').innerHTML = `
                        <div class="nav-item admin-link" id="nav-admin" onclick="App.go('admin')">
                            <i class="fa-solid fa-user-shield"></i> QUẢN TRỊ VIÊN
                        </div>
                    `;
                }
                this.resetTyping();
            },

            go(page) {
                document.querySelectorAll('.page').forEach(p => p.classList.remove('active'));
                document.querySelectorAll('.nav-item').forEach(n => n.classList.remove('active'));
                document.getElementById('page-' + page).classList.add('active');
                if(document.getElementById('nav-' + page)) document.getElementById('nav-' + page).classList.add('active');
                
                if(page === 'admin') this.loadAdminData();
                if(page === 'rank') this.loadRank();
                if(page === 'comm') this.loadComm();
                if(page === 'pro') this.loadProfile();
            },

            // --- TYPING ENGINE ---
            resetTyping(customText = null) {
                clearInterval(this.timer);
                this.playing = false; this.timeLeft = 60; this.curIdx = 0; this.ok = 0; this.err = 0;
                document.getElementById('clock').innerText = "1:00";
                document.getElementById('t-input').value = "";
                document.getElementById('t-input').disabled = false;
                document.getElementById('res-panel').style.display = 'none';
                document.getElementById('stat-best').innerText = (this.user.best || 0) + " WPM";
                document.getElementById('stat-total').innerText = this.user.total || 0;

                this.words = customText || [];
                if(!customText) for(let i=0; i<200; i++) this.words.push(DICT[Math.floor(Math.random()*DICT.length)]);

                const scroll = document.getElementById('word-scroll');
                scroll.style.top = "25px";
                scroll.innerHTML = this.words.map((w, i) => `<span id="w-${i}">${w}</span>`).join("");
                document.getElementById('w-0').className = 'current';
            },

            handleInput(e) {
                if(!this.playing && e.target.value.length > 0) {
                    this.playing = true;
                    this.timer = setInterval(() => {
                        this.timeLeft--;
                        let s = this.timeLeft;
                        document.getElementById('clock').innerText = `0:${s < 10 ? '0'+s : s}`;
                        if(this.timeLeft <= 0) this.finish();
                    }, 1000);
                }

                if(e.target.value.endsWith(" ")) {
                    let typed = e.target.value.trim().toLowerCase();
                    let target = this.words[this.curIdx].toLowerCase();
                    let el = document.getElementById('w-' + this.curIdx);

                    if(typed === target) { el.className = 'correct'; this.ok++; }
                    else { el.className = 'wrong'; this.err++; }

                    this.curIdx++;
                    let next = document.getElementById('w-' + this.curIdx);
                    if(next) {
                        next.className = 'current';
                        if(next.offsetTop > 45) {
                            document.getElementById('word-scroll').style.top = (25 - next.offsetTop) + "px";
                        }
                    }
                    e.target.value = "";
                }
            },

            finish() {
                clearInterval(this.timer);
                document.getElementById('t-input').disabled = true;
                document.getElementById('res-wpm').innerText = this.ok;
                document.getElementById('res-acc').innerText = Math.round((this.ok / (this.ok + this.err)) * 100) || 0 + "%";
                document.getElementById('res-ok').innerText = this.ok;
                document.getElementById('res-panel').style.display = 'flex';

                // Update Stats
                this.user.total += this.ok;
                if(this.ok > this.user.best) this.user.best = this.ok;
                
                localStorage.setItem('v32_u_' + this.user.u, JSON.stringify(this.user));
                localStorage.setItem('v32_session', JSON.stringify(this.user));
                this.updateGlobalRank();
            },

            // --- ADMIN FUNCTIONS ---
            loadAdminData() {
                const keys = Object.keys(localStorage).filter(k => k.startsWith('v32_u_'));
                const users = keys.map(k => JSON.parse(localStorage.getItem(k)));
                
                document.getElementById('adm-count').innerText = users.length;
                document.getElementById('adm-record').innerText = Math.max(...users.map(u => u.best)) + " WPM";

                let h = "";
                users.forEach(u => {
                    h += `<tr>
                        <td><b>${u.u}</b></td>
                        <td><span class="badge badge-${u.role}">${u.role.toUpperCase()}</span></td>
                        <td>${u.best} WPM</td>
                        <td>
                            <button class="btn-action btn-reset-pw" onclick="App.admResetPw('${u.u}')">Reset Pass</button>
                            ${u.u !== 'nhtseri' ? `<button class="btn-action btn-delete" onclick="App.admDelUser('${u.u}')">Xóa</button>` : ''}
                        </td>
                    </tr>`;
                });
                document.getElementById('adm-user-list').innerHTML = h;
            },

            updateSidebarName() {
                const name = document.getElementById('adm-sidebar-in').value.trim();
                if(name) {
                    localStorage.setItem('v32_sidebar_name', name);
                    document.getElementById('sidebar-name').innerText = name;
                    alert("Đã đổi tên Sidebar thành công!");
                }
            },

            admDelUser(u) {
                if(confirm("Xóa thật không bro?")) {
                    localStorage.removeItem('v32_u_' + u);
                    this.loadAdminData();
                }
            },

            admResetPw(u) {
                let n = prompt("Nhập mật khẩu mới cho " + u);
                if(n) {
                    let d = JSON.parse(localStorage.getItem('v32_u_' + u));
                    d.p = n;
                    localStorage.setItem('v32_u_' + u, JSON.stringify(d));
                    alert("Đã đổi xong!");
                }
            },

            // --- RANK & OTHERS ---
            updateGlobalRank() {
                let ranks = JSON.parse(localStorage.getItem('v32_ranks') || "[]");
                let idx = ranks.findIndex(r => r.u === this.user.u);
                if(idx !== -1) ranks[idx].s = this.user.best;
                else ranks.push({u: this.user.u, s: this.user.best});
                ranks.sort((a,b) => b.s - a.s);
                localStorage.setItem('v32_ranks', JSON.stringify(ranks.slice(0, 15)));
            },

            loadRank() {
                const rs = JSON.parse(localStorage.getItem('v32_ranks') || "[]");
                let h = `<thead><tr><th>Hạng</th><th>Người chơi</th><th>Kỷ lục</th></tr></thead><tbody>`;
                rs.forEach((r, i) => {
                    h += `<tr><td><b>#${i+1}</b></td><td>${r.u}</td><td style="color:var(--accent); font-weight:800;">${r.s} WPM</td></tr>`;
                });
                document.getElementById('rank-table').innerHTML = h + "</tbody>";
            },

            loadProfile() {
                document.getElementById('pro-data').innerHTML = `
                    <p>Tên tài khoản: <b style="color:var(--accent)">${this.user.u}</b></p>
                    <p>Mật khẩu: <b style="background:#333; color:#333; cursor:pointer" onclick="this.style.color='white'">${this.user.p}</b> <small>(Click để hiện)</small></p>
                    <p>Quyền hạn: <b>${this.user.role.toUpperCase()}</b></p>
                    <p>Tổng từ đã gõ: <b>${this.user.total}</b></p>
                `;
            }
        };

        document.getElementById('t-input').addEventListener('input', (e) => App.handleInput(e));
        window.onload = () => App.init();
    </script>
</body>
</html>
