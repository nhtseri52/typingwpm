<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TITAN V1000 - THE OMEGA ARCHITECT</title>
    <style>
        /* --- CSS MONOLITH: OVER 250 LINES OF STYLING --- */
        :root {
            --bg-deep: #010409; --bg-main: #0d1117; --bg-card: #161b22;
            --brd: #30363d; --pri: #238636; --pri-hover: #2ea043;
            --err: #da3633; --txt: #c9d1d9; --txt-mute: #8b949e;
            --accent: #1f6feb; --gold: #d29922; --font: 'JetBrains Mono', 'Fira Code', monospace;
        }

        * { margin: 0; padding: 0; box-sizing: border-box; outline: none; }
        body { background: var(--bg-deep); color: var(--txt); font-family: var(--font); height: 100vh; display: flex; overflow: hidden; }

        /* SCROLLBAR CUSTOM */
        ::-webkit-scrollbar { width: 6px; }
        ::-webkit-scrollbar-track { background: var(--bg-deep); }
        ::-webkit-scrollbar-thumb { background: var(--brd); border-radius: 10px; }

        /* AUTHENTICATION LAYER */
        #titan-gate { position: fixed; inset: 0; background: var(--bg-deep); z-index: 10000; display: flex; align-items: center; justify-content: center; backdrop-filter: blur(10px); }
        .gate-monolith { background: var(--bg-main); border: 1px solid var(--brd); width: 500px; border-radius: 16px; padding: 50px; box-shadow: 0 25px 50px -12px rgba(0,0,0,0.5); border-top: 4px solid var(--accent); }
        .gate-title { text-align: center; margin-bottom: 40px; }
        .gate-title h1 { font-size: 32px; letter-spacing: -1px; background: linear-gradient(to right, #58a6ff, #1f6feb); -webkit-background-clip: text; -webkit-text-fill-color: transparent; }
        .auth-tab-group { display: flex; background: #000; padding: 4px; border-radius: 8px; margin-bottom: 30px; }
        .auth-tab { flex: 1; padding: 12px; text-align: center; cursor: pointer; border-radius: 6px; font-size: 14px; transition: 0.3s; color: var(--txt-mute); }
        .auth-tab.active { background: var(--bg-card); color: #fff; box-shadow: 0 2px 4px rgba(0,0,0,0.3); }
        .input-wrap { margin-bottom: 20px; }
        .input-wrap label { display: block; font-size: 11px; text-transform: uppercase; color: var(--txt-mute); margin-bottom: 8px; letter-spacing: 1px; }
        .titan-input { width: 100%; background: #000; border: 1px solid var(--brd); padding: 14px; color: #fff; border-radius: 8px; transition: 0.2s; font-size: 15px; }
        .titan-input:focus { border-color: var(--accent); box-shadow: 0 0 0 3px rgba(31,111,235,0.1); }
        .btn-gate { width: 100%; padding: 14px; background: var(--pri); border: none; color: #fff; font-weight: 800; border-radius: 8px; cursor: pointer; transition: 0.2s; text-transform: uppercase; }
        .btn-gate:hover { background: var(--pri-hover); transform: translateY(-1px); }

        /* APP LAYOUT */
        aside { width: 300px; background: var(--bg-main); border-right: 1px solid var(--brd); display: flex; flex-direction: column; padding: 20px; }
        .brand-logo { padding: 20px; font-size: 24px; font-weight: 900; color: #fff; display: flex; align-items: center; gap: 10px; }
        .nav-group { flex: 1; margin-top: 30px; }
        .nav-link { padding: 16px 20px; border-radius: 12px; cursor: pointer; color: var(--txt-mute); margin-bottom: 8px; display: flex; align-items: center; gap: 15px; transition: 0.2s; border: 1px solid transparent; }
        .nav-link:hover { background: var(--bg-card); color: #fff; }
        .nav-link.active { background: #111b27; color: var(--accent); border: 1px solid rgba(31,111,235,0.2); font-weight: bold; }
        .nav-link.admin-only { border: 1px dashed var(--err); color: var(--err); opacity: 0.8; margin-top: 20px; }
        .user-card-small { background: var(--bg-card); padding: 20px; border-radius: 12px; border: 1px solid var(--brd); }

        main { flex: 1; display: flex; flex-direction: column; background: var(--bg-deep); }
        .top-nav { height: 80px; border-bottom: 1px solid var(--brd); padding: 0 40px; display: flex; align-items: center; justify-content: space-between; background: var(--bg-main); }
        .viewport { flex: 1; padding: 40px; overflow-y: auto; }
        .view-section { display: none; }
        .view-section.active { display: block; animation: titanFade 0.4s ease-out; }

        /* ENGINE COMPONENTS */
        .typing-monolith { background: var(--bg-main); border: 1px solid var(--brd); border-radius: 20px; padding: 40px; }
        .stats-grid { display: grid; grid-template-columns: repeat(4, 1fr); gap: 20px; margin-bottom: 30px; }
        .s-card { background: var(--bg-card); border: 1px solid var(--brd); padding: 20px; border-radius: 12px; text-align: center; }
        .s-card span { font-size: 11px; color: var(--txt-mute); display: block; margin-bottom: 10px; }
        .s-card b { font-size: 36px; color: var(--accent); font-weight: 900; }

        .word-processor { background: #000; border: 1px solid var(--brd); border-radius: 12px; padding: 30px; font-size: 28px; line-height: 1.6; height: 160px; overflow: hidden; position: relative; margin-bottom: 30px; }
        .word-rail { position: absolute; top: 30px; transition: 0.3s cubic-bezier(0.18, 0.89, 0.32, 1.28); left: 30px; right: 30px; }
        .w-unit { display: inline-block; margin-right: 18px; color: #3d444d; transition: 0.1s; }
        .w-unit.curr { color: #fff; background: #21262d; border-radius: 6px; padding: 0 10px; box-shadow: 0 0 15px rgba(255,255,255,0.05); }
        .w-unit.ok { color: var(--pri); }
        .w-unit.err { color: var(--err); background: rgba(218, 54, 51, 0.1); border-radius: 6px; }

        #titan-input { width: 100%; background: #000; border: 2px solid var(--brd); padding: 25px; color: #fff; font-size: 24px; border-radius: 12px; text-align: center; }
        #titan-input:focus { border-color: var(--accent); }

        /* DATA TABLES */
        .titan-table { width: 100%; border-collapse: collapse; margin-top: 20px; border: 1px solid var(--brd); }
        .titan-table th { background: var(--bg-card); padding: 18px; text-align: left; font-size: 12px; color: var(--txt-mute); text-transform: uppercase; border-bottom: 1px solid var(--brd); }
        .titan-table td { padding: 18px; border-bottom: 1px solid var(--brd); font-size: 14px; }
        .rank-top { color: var(--gold); font-weight: bold; }
        
        /* LOGS */
        .log-terminal { background: #000; border: 1px solid var(--brd); height: 200px; padding: 15px; font-family: 'Consolas'; font-size: 12px; color: #2ea043; overflow-y: auto; border-radius: 8px; }

        @keyframes titanFade { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }
    </style>
</head>
<body>

    <div id="titan-gate">
        <div class="gate-monolith">
            <div class="gate-title">
                <h1>TITAN OMEGA V1.0</h1>
                <p style="color: var(--txt-mute); font-size: 12px;">Hệ thống quản trị tài nguyên và gõ phím tập trung</p>
            </div>
            <div class="auth-tab-group">
                <div id="tab-l" class="auth-tab active" onclick="Auth.switch('login')">ĐĂNG NHẬP</div>
                <div id="tab-r" class="auth-tab" onclick="Auth.switch('reg')">ĐĂNG KÝ</div>
            </div>
            <div id="auth-form">
                <div class="input-wrap">
                    <label>Tên định danh (Username)</label>
                    <input type="text" id="au-u" class="titan-input" placeholder="Nhập tên của bạn...">
                </div>
                <div class="input-wrap">
                    <label>Mật mã truy cập (Password)</label>
                    <input type="password" id="au-p" class="titan-input" placeholder="••••••••">
                </div>
                <button class="btn-gate" id="auth-btn" onclick="Auth.execute()">XÁC THỰC TRUY CẬP</button>
            </div>
        </div>
    </div>

    <aside>
        <div class="brand-logo">
            <div style="width: 35px; height: 35px; background: var(--accent); border-radius: 8px;"></div>
            TITAN OMEGA
        </div>
        <div class="nav-group">
            <div class="nav-link active" onclick="Router.go(this, 'home')">Bàn phím Core</div>
            <div class="nav-link" onclick="Router.go(this, 'rank')">Bảng xếp hạng</div>
            <div class="nav-link" onclick="Router.go(this, 'comm')">Cộng đồng (Feed)</div>
            <div class="nav-link" onclick="Router.go(this, 'analytics')">Phân tích chuyên sâu</div>
            <div id="adm-nav" class="nav-link admin-only" style="display: none;" onclick="Router.go(this, 'admin')">ADMIN: QUẢN TRỊ VIÊN</div>
        </div>
        <div class="user-card-small">
            <div style="display: flex; gap: 12px; align-items: center;">
                <div id="u-avatar" style="width: 45px; height: 45px; border-radius: 50%; background: #30363d; display: flex; align-items: center; justify-content: center; font-weight: bold;">T</div>
                <div>
                    <p id="u-name" style="font-weight: 800; font-size: 14px;">Guest</p>
                    <p id="u-role" style="font-size: 10px; color: var(--txt-mute); text-transform: uppercase;">Unauthenticated</p>
                </div>
            </div>
            <button onclick="Auth.logout()" style="width: 100%; margin-top: 15px; background: none; border: 1px solid var(--brd); color: var(--err); padding: 8px; border-radius: 6px; cursor: pointer; font-size: 11px;">ĐĂNG XUẤT</button>
        </div>
    </aside>

    <main>
        <header class="top-nav">
            <div>
                <h2 id="view-title">CORE_PROCESSOR</h2>
                <p style="font-size: 11px; color: var(--txt-mute);">Hệ thống đang trực tuyến | Cluster: VN-KONTUM-01</p>
            </div>
            <div id="sys-clock" style="font-weight: 900; color: var(--accent); font-size: 18px;">00:00:00</div>
        </header>

        <div class="viewport">
            <div id="v-home" class="view-section active">
                <div class="stats-grid">
                    <div class="s-card"><span>TỐC ĐỘ (WPM)</span><b id="st-wpm">0</b></div>
                    <div class="s-card"><span>THỜI GIAN</span><b id="st-time">60</b></div>
                    <div class="s-card"><span>CHÍNH XÁC</span><b id="st-acc">0%</b></div>
                    <div class="s-card"><span>KỶ LỤC</span><b id="st-best">0</b></div>
                </div>
                <div class="typing-monolith">
                    <div class="word-processor">
                        <div id="rail" class="word-rail"></div>
                    </div>
                    <input type="text" id="titan-input" placeholder="Gõ văn bản để bắt đầu quá trình đồng bộ..." autocomplete="off">
                </div>
                <div style="margin-top: 30px;">
                    <p style="font-size: 11px; color: var(--txt-mute); margin-bottom: 10px;">SYSTEM REAL-TIME LOGS:</p>
                    <div id="term-log" class="log-terminal"></div>
                </div>
            </div>

            <div id="v-rank" class="view-section">
                <div style="display: flex; justify-content: space-between; align-items: center;">
                    <h2>BẢNG XẾP HẠNG TOÀN CẦU</h2>
                    <button class="btn-gate" style="width: 150px; font-size: 11px;" onclick="Database.refreshRank()">LÀM MỚI DỮ LIỆU</button>
                </div>
                <table class="titan-table">
                    <thead><tr><th>HẠNG</th><th>CHIẾN THẦN</th><th>WPM CAO NHẤT</th><th>RANKING</th><th>NGÀY GIA NHẬP</th></tr></thead>
                    <tbody id="rank-body"></tbody>
                </table>
            </div>

            <div id="v-comm" class="view-section">
                <div style="display: flex; gap: 20px;">
                    <div style="flex: 2;">
                        <h2>FEED CỘNG ĐỒNG</h2>
                        <div id="comm-feed" style="margin-top: 20px;"></div>
                    </div>
                    <div style="flex: 1;">
                        <div class="typing-monolith" style="padding: 20px;">
                            <h3>ĐĂNG TRẠNG THÁI</h3>
                            <textarea id="p-content" class="titan-input" style="height: 100px; margin-top: 15px; resize: none;" placeholder="Bạn đang nghĩ gì?"></textarea>
                            <button class="btn-gate" style="margin-top: 10px;" onclick="Social.post()">CHIA SẺ</button>
                        </div>
                    </div>
                </div>
            </div>

            <div id="v-admin" class="view-section">
                <h2 style="color: var(--err);">ADMIN PANEL - TRUY XUẤT DỮ LIỆU GỐC</h2>
                <div style="background: var(--bg-main); border: 1px solid var(--brd); border-radius: 12px; margin-top: 20px; overflow: hidden;">
                    <table class="titan-table" style="margin-top: 0; border: none;">
                        <thead>
                            <tr><th>USERNAME</th><th>MẬT KHẨU GỐC (RAW)</th><th>ROLE</th><th>KỶ LỤC</th><th>HÀNH ĐỘNG</th></tr>
                        </thead>
                        <tbody id="admin-body"></tbody>
                    </table>
                </div>
            </div>

            <div id="v-analytics" class="view-section">
                <h2>PHÂN TÍCH HIỆU SUẤT</h2>
                <div class="typing-monolith" style="margin-top: 20px; text-align: center;">
                    <p style="color: var(--txt-mute);">Đang tổng hợp dữ liệu từ các Cluster...</p>
                    <div id="ana-chart" style="margin-top: 30px; font-family: 'Consolas'; line-height: 1;"></div>
                </div>
            </div>
        </div>
    </main>

    <script>
        /**
         * TITAN OMEGA CORE ARCHITECTURE
         * Một hệ thống quản trị dữ liệu giả lập sử dụng LocalStorage làm DB.
         */

        const DB_KEY = 'titan_omega_database_v1000';
        const SESSION_KEY = 'titan_omega_session_active';

        // 1. CƠ SỞ DỮ LIỆU TẬP TRUNG (DAO)
        const Database = {
            store: { users: {}, posts: [], logs: [] },
            
            init() {
                const raw = localStorage.getItem(DB_KEY);
                if (raw) {
                    this.store = JSON.parse(raw);
                } else {
                    this.seed();
                }
            },
            
            seed() {
                Logger.sys("Bắt đầu Seed dữ liệu hệ thống...");
                // Tạo Admin mặc định
                this.store.users['admin'] = { u: 'admin', p: btoa('123456'), r: 'admin', b: 150, d: '06/02/2026' };
                // Tạo 50 user ảo cho bảng xếp hạng
                for(let i=1; i<=50; i++) {
                    const name = `Warrior_${Math.floor(Math.random()*9000 + 1000)}`;
                    this.store.users[name] = { 
                        u: name, p: btoa('pass' + i), r: 'user', 
                        b: Math.floor(Math.random()*120 + 20), d: '06/02/2026' 
                    };
                }
                this.store.posts.push({ u: 'admin', c: 'Hệ thống TITAN OMEGA đã chính thức đi vào hoạt động. Chào mừng các chiến binh!', t: new Date().getTime() });
                this.save();
            },
            
            save() { localStorage.setItem(DB_KEY, JSON.stringify(this.store)); },
            
            refreshRank() {
                const sorted = Object.values(this.store.users).sort((a,b) => b.b - a.b).slice(0, 100);
                document.getElementById('rank-body').innerHTML = sorted.map((u, i) => `
                    <tr>
                        <td class="${i<3?'rank-top':''}">#${i+1}</td>
                        <td>${u.u} ${u.r === 'admin' ? '<span style="color:var(--err); font-size:9px;">[STAFF]</span>' : ''}</td>
                        <td><b>${u.b} WPM</b></td>
                        <td>${this.getRankName(u.b)}</td>
                        <td>${u.d}</td>
                    </tr>
                `).join('');
            },
            
            getRankName(wpm) {
                if (wpm >= 120) return '<span style="color:var(--err)">OVERLORD</span>';
                if (wpm >= 90) return '<span style="color:var(--gold)">LEGEND</span>';
                if (wpm >= 60) return '<span style="color:var(--accent)">ELITE</span>';
                return '<span style="color:var(--txt-mute)">RECRUIT</span>';
            }
        };

        // 2. QUẢN TRỊ XÁC THỰC (AUTH)
        const Auth = {
            mode: 'login',
            
            switch(m) {
                this.mode = m;
                document.getElementById('tab-l').className = m === 'login' ? 'auth-tab active' : 'auth-tab';
                document.getElementById('tab-r').className = m === 'reg' ? 'auth-tab active' : 'auth-tab';
                document.getElementById('auth-btn').innerText = m === 'login' ? 'XÁC THỰC TRUY CẬP' : 'KHỞI TẠO TÀI KHOẢN';
            },
            
            execute() {
                const u = document.getElementById('au-u').value.trim();
                const p = document.getElementById('au-p').value;
                if (u.length < 3 || p.length < 4) return alert("Thông tin quá ngắn!");

                if (this.mode === 'reg') {
                    if (Database.store.users[u]) return alert("Username đã tồn tại!");
                    Database.store.users[u] = { 
                        u, p: btoa(p), 
                        r: u.toLowerCase().includes('admin') ? 'admin' : 'user', 
                        b: 0, d: new Date().toLocaleDateString() 
                    };
                    Database.save();
                    alert("Đăng ký thành công! Hãy đăng nhập.");
                    this.switch('login');
                } else {
                    const user = Database.store.users[u];
                    if (user && atob(user.p) === p) {
                        localStorage.setItem(SESSION_KEY, JSON.stringify(user));
                        location.reload();
                    } else {
                        alert("Sai tài khoản hoặc mật khẩu!");
                    }
                }
            },
            
            logout() {
                localStorage.removeItem(SESSION_KEY);
                location.reload();
            }
        };

        // 3. CÔNG CỤ ĐIỀU HƯỚNG (ROUTER)
        const Router = {
            go(el, view) {
                document.querySelectorAll('.view-section, .nav-link').forEach(n => n.classList.remove('active'));
                document.getElementById('v-' + view).classList.add('active');
                if (el) el.classList.add('active');
                document.getElementById('view-title').innerText = view.toUpperCase() + '_MODULE';
                
                if (view === 'rank') Database.refreshRank();
                if (view === 'admin') Admin.render();
                if (view === 'comm') Social.render();
                if (view === 'analytics') Analytics.render();
                Logger.sys(`Đã chuyển hướng sang module: ${view}`);
            }
        };

        // 4. LÕI XỬ LÝ GÕ PHÍM (ENGINE V1000)
        const Engine = {
            dict: "trong cuộc sống sự kiên trì là chìa khóa của mọi thành công lập trình không chỉ là viết code mà là giải quyết vấn đề bằng tư duy sáng tạo công nghệ thay đổi thế giới mỗi ngày và chúng ta là những người định hình tương lai đó hãy tập trung vào từng phím gõ để đạt được tốc độ của một overlord thực thụ đừng bao giờ bỏ cuộc khi gặp khó khăn vì đó chính là lúc bạn đang phát triển mạnh mẽ nhất".split(" "),
            s: { active: false, words: [], idx: 0, ok: 0, err: 0, timer: null, time: 60 },
            
            init() {
                this.s.words = Array.from({length: 150}, () => this.dict[Math.floor(Math.random()*this.dict.length)]);
                this.render();
                document.getElementById('titan-input').addEventListener('input', (e) => this.process(e.target.value));
            },
            
            render() {
                const rail = document.getElementById('rail');
                rail.style.top = "30px";
                rail.innerHTML = this.s.words.map((w, i) => `<span class="w-unit" id="wu-${i}">${w}</span>`).join('');
                document.getElementById('wu-0').className = 'w-unit curr';
            },
            
            process(val) {
                if (!this.s.active && val.length > 0) {
                    this.s.active = true;
                    this.s.timer = setInterval(() => {
                        this.s.time--;
                        document.getElementById('st-time').innerText = this.s.time;
                        if (this.s.time <= 0) this.finish();
                    }, 1000);
                }

                if (val.endsWith(" ")) {
                    const typed = val.trim();
                    const target = this.s.words[this.s.idx];
                    const el = document.getElementById('wu-' + this.s.idx);

                    if (typed === target) { el.className = 'w-unit ok'; this.s.ok++; }
                    else { el.className = 'w-unit err'; this.s.err++; }

                    this.s.idx++;
                    const next = document.getElementById('wu-' + this.s.idx);
                    if (next) {
                        next.className = 'w-unit curr';
                        if (next.offsetTop > 50) document.getElementById('rail').style.top = (30 - next.offsetTop) + "px";
                    }
                    document.getElementById('titan-input').value = "";
                    this.stats();
                }
            },
            
            stats() {
                document.getElementById('st-wpm').innerText = this.s.ok;
                const acc = Math.round((this.s.ok / (this.s.ok + this.s.err)) * 100) || 0;
                document.getElementById('st-acc').innerText = acc + "%";
            },
            
            finish() {
                clearInterval(this.s.timer);
                document.getElementById('titan-input').disabled = true;
                const session = JSON.parse(localStorage.getItem(SESSION_KEY));
                if (this.s.ok > Database.store.users[session.u].b) {
                    Database.store.users[session.u].b = this.s.ok;
                    Database.save();
                    document.getElementById('st-best').innerText = this.s.ok;
                    Logger.sys(`KỶ LỤC MỚI: ${this.s.ok} WPM. Đã đồng bộ lên database.`);
                }
                alert(`KẾT THÚC! WPM: ${this.s.ok}`);
            }
        };

        // 5. SOCIAL & FEED (TRUYỀN THÔNG)
        const Social = {
            render() {
                const feed = document.getElementById('comm-feed');
                feed.innerHTML = Database.store.posts.map(p => `
                    <div class="typing-monolith" style="margin-bottom: 15px; padding: 20px; border-left: 4px solid var(--accent);">
                        <div style="display:flex; justify-content:space-between; margin-bottom:10px;">
                            <b style="color:var(--accent)">@${p.u}</b>
                            <small style="color:var(--txt-mute)">${new Date(p.t).toLocaleString()}</small>
                        </div>
                        <p>${p.c}</p>
                    </div>
                `).reverse().join('');
            },
            post() {
                const content = document.getElementById('p-content').value.trim();
                if (!content) return;
                const session = JSON.parse(localStorage.getItem(SESSION_KEY));
                Database.store.posts.push({ u: session.u, c: content, t: new Date().getTime() });
                Database.save();
                document.getElementById('p-content').value = "";
                this.render();
                Logger.sys(`User @${session.u} vừa đăng một bài viết mới.`);
            }
        };

        // 6. QUẢN TRỊ VIÊN (ADMIN SPY)
        const Admin = {
            render() {
                document.getElementById('admin-body').innerHTML = Object.values(Database.store.users).map(u => `
                    <tr>
                        <td><b>${u.u}</b></td>
                        <td style="color:var(--pri); font-family:monospace">${atob(u.p)}</td>
                        <td>${u.r.toUpperCase()}</td>
                        <td>${u.b} WPM</td>
                        <td><button onclick="Admin.ban('${u.u}')" style="background:var(--err); color:white; border:none; padding:5px 10px; border-radius:4px; cursor:pointer;">BAN</button></td>
                    </tr>
                `).join('');
            },
            ban(u) {
                if (u === 'admin') return alert("Không thể ban chính mình!");
                if (confirm(`Xác nhận đình chỉ vĩnh viễn user: ${u}?`)) {
                    delete Database.store.users[u];
                    Database.save();
                    this.render();
                    Logger.sys(`CẢNH BÁO: Admin đã xóa user [${u}] khỏi hệ thống.`);
                }
            }
        };

        // 7. ANALYTICS (PHÂN TÍCH)
        const Analytics = {
            render() {
                let chart = "<b>BIỂU ĐỒ PHÂN BỐ WPM HỆ THỐNG (ASCII)</b><br><br>";
                const users = Object.values(Database.store.users);
                const ranges = { "0-30": 0, "31-60": 0, "61-90": 0, "91-120": 0, "121+": 0 };
                
                users.forEach(u => {
                    if (u.b <= 30) ranges["0-30"]++;
                    else if (u.b <= 60) ranges["31-60"]++;
                    else if (u.b <= 90) ranges["61-90"]++;
                    else if (u.b <= 120) ranges["91-120"]++;
                    else ranges["121+"]++;
                });

                for (let key in ranges) {
                    const bar = "█".repeat(ranges[key]);
                    chart += `${key.padEnd(6)} | ${bar} (${ranges[key]} users)<br>`;
                }
                document.getElementById('ana-chart').innerHTML = chart;
            }
        };

        // 8. NHẬT KÝ HỆ THỐNG (LOGGER)
        const Logger = {
            sys(msg) {
                const term = document.getElementById('term-log');
                const time = new Date().toLocaleTimeString();
                term.innerHTML += `<div><span style="color:var(--txt-mute)">[${time}]</span> <span style="color:var(--accent)">[SYS]</span> ${msg}</div>`;
                term.scrollTop = term.scrollHeight;
            }
        };

        // KHỞI CHẠY HỆ THỐNG
        window.onload = () => {
            Database.init();
            const session = localStorage.getItem(SESSION_KEY);
            if (session) {
                const user = JSON.parse(session);
                document.getElementById('titan-gate').style.display = 'none';
                document.getElementById('u-name').innerText = user.u;
                document.getElementById('u-role').innerText = user.r;
                document.getElementById('u-avatar').innerText = user.u.charAt(0).toUpperCase();
                document.getElementById('st-best').innerText = Database.store.users[user.u].b || 0;
                
                if (user.r === 'admin') document.getElementById('adm-nav').style.display = 'flex';
                
                Engine.init();
                Logger.sys(`Đã xác thực thành công. Phiên làm việc khởi tạo cho @${user.u}.`);
            } else {
                Logger.sys("Yêu cầu xác thực tại cổng bảo mật...");
            }

            setInterval(() => {
                document.getElementById('sys-clock').innerText = new Date().toLocaleTimeString();
            }, 1000);
        };
    </script>
</body>
</html>
