<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GÕ BÀN PHÍM TIẾNG VIỆT - FULL OPTION</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root { --p: #445d6e; --a: #3498db; --bg: #f4f7f9; --ok: #2ecc71; --err: #e74c3c; }
        * { box-sizing: border-box; margin: 0; padding: 0; font-family: 'Segoe UI', sans-serif; }
        body { background: var(--bg); display: flex; height: 100vh; overflow: hidden; }

        /* Sidebar */
        .sidebar { width: 280px; background: white; border-right: 1px solid #ddd; display: flex; flex-direction: column; flex-shrink: 0; }
        .logo { padding: 30px 15px; text-align: center; font-weight: 800; color: var(--a); font-size: 20px; border-bottom: 1px solid #eee; text-transform: uppercase; }
        .nav-item { padding: 15px 25px; cursor: pointer; color: var(--p); font-weight: 600; display: flex; align-items: center; gap: 12px; transition: 0.2s; }
        .nav-item:hover { background: #f0f4f8; }
        .nav-item.active { background: var(--a); color: white; }

        /* Main Area */
        .main { flex: 1; padding: 40px; display: flex; flex-direction: column; align-items: center; overflow-y: auto; }
        .container { width: 100%; max-width: 900px; position: relative; }

        /* Trang Luyện Tập */
        .word-window {
            background: white; border: 1px solid #ddd; border-radius: 8px; padding: 20px;
            height: 110px; overflow: hidden; position: relative; font-size: 28px; line-height: 50px;
            margin-bottom: 25px; box-shadow: 0 4px 10px rgba(0,0,0,0.05); user-select: none;
        }
        .word-wrap { position: absolute; top: 20px; left: 20px; right: 20px; transition: 0.2s; }
        .word-wrap span { margin-right: 15px; padding: 2px 8px; border-radius: 4px; color: #555; display: inline-block; }
        .w-cur { background: #ddd; color: #000; }
        .w-ok { color: var(--ok) !important; }
        .w-err { color: var(--err) !important; background: #ffdada; }

        .input-bar { display: flex; gap: 15px; background: #dde4eb; padding: 20px; border-radius: 12px; width: 100%; }
        #t-in { flex: 1; height: 60px; border: 1px solid #ccc; border-radius: 8px; padding: 0 20px; font-size: 24px; outline: none; }
        .timer { width: 100px; background: #34495e; color: white; display: flex; align-items: center; justify-content: center; font-weight: 800; border-radius: 8px; font-size: 24px; }
        .btn-reset { width: 60px; background: var(--a); color: white; border: none; border-radius: 8px; cursor: pointer; font-size: 22px; }

        /* Bảng Kết Quả (Result Box) */
        #res-box {
            position: absolute; inset: 0; background: white; border-radius: 12px; border: 3px solid var(--a);
            display: none; flex-direction: column; align-items: center; justify-content: center; z-index: 100;
        }
        .res-grid { display: grid; grid-template-columns: repeat(3, 1fr); gap: 20px; margin: 30px 0; width: 90%; }
        .res-card { padding: 20px; background: #f8f9fa; border-radius: 10px; text-align: center; border: 1px solid #eee; }
        .res-num { font-size: 40px; font-weight: 900; color: var(--a); }

        /* Trang Hồ Sơ */
        .page { display: none; width: 100%; background: white; padding: 30px; border-radius: 12px; box-shadow: 0 4px 10px rgba(0,0,0,0.05); }
        .page.active { display: block; }
        .profile-info { line-height: 3; font-size: 18px; }
        .profile-info b { color: var(--a); }

        /* Auth Screen */
        .auth { position: fixed; inset: 0; background: #2c3e50; z-index: 2000; display: flex; align-items: center; justify-content: center; }
        .auth-card { background: white; padding: 40px; border-radius: 15px; width: 400px; text-align: center; box-shadow: 0 10px 30px rgba(0,0,0,0.3); }
        .auth-card h2 { margin-bottom: 25px; color: var(--p); letter-spacing: 1px; }
        .auth-card input { width: 100%; padding: 15px; margin-bottom: 15px; border: 1px solid #ddd; border-radius: 8px; font-size: 16px; outline: none; }
        .btn-login { width: 100%; padding: 15px; background: var(--a); color: white; border: none; border-radius: 8px; cursor: pointer; font-weight: 700; font-size: 16px; }

        /* Animation cho đẹp */
        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
        .active { animation: fadeIn 0.3s ease; }
    </style>
</head>
<body>

    <div id="auth-screen" class="auth">
        <div class="auth-card">
            <h2>ĐĂNG NHẬP</h2>
            <input type="text" id="u-login" placeholder="Tên tài khoản">
            <input type="password" id="p-login" placeholder="Mật khẩu">
            <button class="btn-login" onclick="app.login()">VÀO LUYỆN TẬP</button>
            <p style="margin-top:20px; font-size:14px; color:#777">Admin mặc định: nhtseri / Locthinh1!</p>
        </div>
    </div>

    <div class="sidebar">
        <div class="logo">GÕ BÀN PHÍM VIỆT</div>
        <div class="nav-item active" id="m-typ" onclick="app.go('typ')"><i class="fa-solid fa-keyboard"></i> Luyện tập</div>
        <div class="nav-item" id="m-pro" onclick="app.go('pro')"><i class="fa-solid fa-id-card"></i> Hồ sơ cá nhân</div>
        <div class="nav-item" style="margin-top:auto; color:orange" onclick="app.logout()"><i class="fa-solid fa-right-from-bracket"></i> Đăng xuất</div>
    </div>

    <div class="main">
        
        <div id="page-typ" class="container" style="display:block">
            <div id="res-box">
                <h1 style="color:var(--p)">KẾT QUẢ CỦA BẠN</h1>
                <div class="res-grid">
                    <div class="res-card"><div class="res-num" id="res-wpm">0</div>WPM</div>
                    <div class="res-card"><div class="res-num" id="res-acc">0%</div>ĐỘ CHÍNH XÁC</div>
                    <div class="res-card"><div class="res-num" id="res-ok" style="color:var(--ok)">0</div>TỪ ĐÚNG</div>
                </div>
                <button class="btn-login" style="width:200px" onclick="app.reset()">THỬ LẠI</button>
            </div>

            <div class="word-window">
                <div id="word-wrap" class="word-wrap"></div>
            </div>

            <div class="input-bar">
                <input type="text" id="t-in" placeholder="Bắt đầu gõ từ tại đây..." autocomplete="off" spellcheck="false">
                <div id="clock" class="timer">1:00</div>
                <button class="btn-reset" onclick="app.reset()"><i class="fa-solid fa-sync"></i></button>
            </div>
            
            <div style="margin-top:25px; font-size:20px; font-weight:bold; color:var(--p)">
                Kỷ lục của bạn: <span id="best-display" style="color:var(--a)">0</span> WPM
            </div>
        </div>

        <div id="page-pro" class="page">
            <h2 style="margin-bottom:20px; border-bottom:2px solid #eee; padding-bottom:10px">HỒ SƠ NGƯỜI DÙNG</h2>
            <div id="profile-content" class="profile-info"></div>
        </div>

    </div>

<script>
    const WORDS_BANK = "anh em gia đình trường học máy tính điện thoại bàn phím chuột màn hình lập trình thông minh chiến thắng nỗ lực kiên trì thành công hạnh phúc việt nam hà nội sài gòn du lịch biển nước ăn ngon vui vẻ tự tin sáng tạo lịch sử toán vật lý hóa học tiếng anh độc lập tự do tổ quốc bạn bè sinh nhật lễ hội xuân hạ thu đông vở viết kiến thức kỹ năng văn phòng chất lượng tài chính sức khỏe thể thao bóng đá gym phim ảnh mạng xã hội chụp hình nhà khách sạn cà phê trà sữa phở bún cơm trái cây cam táo bia rượu mưa nắng gió mây trời đất sông núi rừng cây hoa lá vàng bạc đồng sắt thép nhôm kính nhựa giấy bút mực thước cặp sách bàn ghế giường tủ bếp nồi chảo chén đĩa muỗng đũa khăn áo quần giày dép mũ nón ví tiền đồng hồ kính mát nhẫn dây chuyền vòng tay tai nghe loa pin sạc cáp wifi web app code game phim nhạc họa ca múa hát nhảy đàn sáo trống kèn vẽ tô màu tranh ảnh tượng đá gạch cát vôi xi măng sơn gỗ tre nứa lá cọ dừa chuối xoài ổi mận đào lê nho dâu bơ mít dứa khế chanh ớt tỏi hành gừng sả tiêu muối đường mì chính dầu mỡ thịt cá tôm cua ốc ếch lươn gà vịt ngỗng heo bò trâu dê cừu ngựa voi hổ báo sư tử gấu khỉ vượn nai hoẵng thỏ chuột mèo chó chim cá sâu bướm ong kiến gián muỗi ruồi nhện rắn rùa thằn lằn".split(" ");

    const app = {
        user: null, words: [], cur: 0, ok: 0, err: 0, time: 60, active: false, timer: null,

        init() {
            const ss = localStorage.getItem('v29_session');
            if(ss) { 
                this.user = JSON.parse(ss); 
                document.getElementById('auth-screen').style.display='none'; 
                this.reset(); 
            }
        },

        login() {
            const u = document.getElementById('u-login').value, p = document.getElementById('p-login').value;
            if(!u || !p) return alert("Điền đủ thông tin!");
            
            // Logic lưu trữ user vào LocalStorage
            let storedUser = JSON.parse(localStorage.getItem('v29_u_' + u));
            if(!storedUser) {
                storedUser = { u, p, b: 0 };
                localStorage.setItem('v29_u_' + u, JSON.stringify(storedUser));
            } else {
                if(storedUser.p !== p) return alert("Sai mật khẩu!");
            }
            
            this.user = storedUser;
            localStorage.setItem('v29_session', JSON.stringify(this.user));
            location.reload();
        },

        reset() {
            clearInterval(this.timer);
            this.active = false; this.time = 60; this.cur = 0; this.ok = 0; this.err = 0;
            document.getElementById('clock').innerText = "1:00";
            document.getElementById('t-in').value = "";
            document.getElementById('t-in').disabled = false;
            document.getElementById('res-box').style.display = "none";
            document.getElementById('best-display').innerText = this.user.b || 0;
            
            // Tạo danh sách từ ngẫu nhiên
            this.words = [];
            for(let i=0; i<200; i++) this.words.push(WORDS_BANK[Math.floor(Math.random()*WORDS_BANK.length)]);
            
            const wrap = document.getElementById('word-wrap');
            wrap.style.top = "20px";
            wrap.innerHTML = this.words.map((w, i) => `<span id="w-${i}">${w}</span>`).join("");
            document.getElementById('w-0').className = 'w-cur';
            document.getElementById('t-in').focus();
        },

        handle(e) {
            if(!this.active && e.target.value.length > 0) {
                this.active = true;
                this.timer = setInterval(() => {
                    this.time--;
                    let s = this.time;
                    document.getElementById('clock').innerText = `0:${s<10?'0'+s:s}`;
                    if(this.time <= 0) this.finish();
                }, 1000);
            }

            if(e.target.value.endsWith(" ")) {
                let typed = e.target.value.trim().toLowerCase();
                let target = this.words[this.cur].toLowerCase();
                let el = document.getElementById('w-'+this.cur);

                if(typed === target) { el.className = 'w-ok'; this.ok++; }
                else { el.className = 'w-err'; this.err++; }

                this.cur++;
                let next = document.getElementById('w-'+this.cur);
                if(next) {
                    next.className = 'w-cur';
                    // Cơ chế cuộn dòng của 10FastFingers
                    if(next.offsetTop > 50) {
                        document.getElementById('word-wrap').style.top = (20 - next.offsetTop) + "px";
                    }
                }
                e.target.value = "";
            }
        },

        finish() {
            clearInterval(this.timer);
            this.active = false;
            document.getElementById('t-in').disabled = true;

            // Tính toán & Hiện bảng kết quả
            document.getElementById('res-wpm').innerText = this.ok;
            document.getElementById('res-acc').innerText = Math.round((this.ok / (this.ok + this.err)) * 100) || 0 + "%";
            document.getElementById('res-ok').innerText = this.ok;
            document.getElementById('res-box').style.display = "flex";

            // Cập nhật kỷ lục vào LocalStorage
            if(this.ok > (this.user.b || 0)) {
                this.user.b = this.ok;
                localStorage.setItem('v29_u_' + this.user.u, JSON.stringify(this.user));
                localStorage.setItem('v29_session', JSON.stringify(this.user));
                document.getElementById('best-display').innerText = this.ok;
            }
        },

        go(p) {
            document.getElementById('page-typ').style.display = (p === 'typ' ? 'block' : 'none');
            document.getElementById('page-pro').style.display = (p === 'pro' ? 'block' : 'none');
            document.querySelectorAll('.nav-item').forEach(i => i.classList.remove('active'));
            document.getElementById('m-' + p).classList.add('active');

            if(p === 'pro') {
                document.getElementById('profile-content').innerHTML = `
                    <p>Tên tài khoản: <b>${this.user.u}</b></p>
                    <p>Mật khẩu: <b style="background:#333; color:#333; padding:2px 10px; border-radius:4px; cursor:pointer" onclick="this.style.color='white'">${this.user.p}</b> (Click để xem)</p>
                    <p>Tốc độ cao nhất: <b>${this.user.b || 0} WPM</b></p>
                    <p>Trạng thái: <span style="color:green">Đang hoạt động</span></p>
                `;
            }
        },

        logout() {
            localStorage.removeItem('v29_session');
            location.reload();
        }
    };

    document.getElementById('t-in').oninput = (e) => app.handle(e);
    window.onload = () => app.init();
</script>
</body>
</html>
